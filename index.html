<!DOCTYPE html>
<html>
  <head>
    <script>
      document.addEventListener('DOMContentLoaded', function() {

        let subjectSelectors = document.querySelectorAll('.subject-selector');
        subjectSelectors.forEach(selector => {
          selector.addEventListener('change', function() {
            if(selector.checked) {
              document.getElementById('input-set').innerHTML = `
                <div>
                  <input id=${selector.id} type="number" max="10" min="0">
                  <label for=${selector.id}>${selector.name}</label>
                </div>`;
              updateInputs();
            }
          });
        });

        function updateInputs()
        {
          let inputs = document.querySelectorAll('.grade');
          inputs.forEach(input => {
            input.addEventListener('change', function() {
              let mti = parseFloat(document.getElementById('mti').value) || 0;
              let ley = parseFloat(document.getElementById('ley').value) || 0;
              let fil = parseFloat(document.getElementById('fil').value) || 0;
              let li1 = parseFloat(document.getElementById('li1').value) || 0;

              let average = ((mti + ley + fil + li1)/4);
              document.getElementById('results').innerHTML = `Nota final: ${average}`;
            });
          });
        }
      });
    </script>
  </head>
  <body>
    <h1>Calculador de Nota Media</h1>
    <fieldset>
      <legend>Elige tus asignaturas:</legend>
      
      <div>
        <input type="checkbox" class="subject-selector" id="mti" name="Matemáticas"/>
        <label for="mti">Matemáticas</label>
      </div>
      <div>
        <input type="checkbox" class="subject-selector" id="ley" name="Lengua"/>
        <label for="ley">Lengua</label>
      </div>
      <div>
        <input type="checkbox" class="subject-selector" id="fil" name="Filosofía"/>
        <label for="fil">Filosofía</label>
      </div>
      <div>
        <input type="checkbox" class="subject-selector" id="li1" name="Inglés"/>
        <label for="li1">Inglés</label>
      </div>

    </fieldset>

    <div id="input-set"></div>

    <p id="results"></p>
  </body>
</html>